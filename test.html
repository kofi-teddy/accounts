'\n<!doctype html>\n<html lang="en">\n  <head>\n    <!-- Required meta tags -->\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">\n    <!-- Bootstrap CSS -->\n    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.css">\n    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">\n    <link rel="stylesheet" href="/static/accountancy/css/style.css">\n    \n    <link rel="stylesheet" href="/static/accountancy/css/selectize.css">\n    <link rel="stylesheet" href="/static/accountancy/css/input_dropdown.css">\n    <link rel="stylesheet" href="/static/accountancy/css/input_trans_grid.css">\n    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">\n    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.6.2/css/buttons.dataTables.min.css">\n    <link rel="stylesheet" href"https://cdn.datatables.net/scroller/2.0.2/css/scroller.dataTables.min.css">\n    <link rel="stylesheet" href="/static/accountancy/css/matching.css">\n    \n    <link rel="stylesheet" href="/static/purchases/css/purchase_input.css">\n\n\n  </head>\n  <body>\n\n    <header class="header-nav bg-primary-blue font-weight-bold">\n      <nav class="navbar navbar-expand-lg text-white">\n        <div class="collapse navbar-collapse" id="navbarNavDropdown">\n          <ul class="navbar-nav">\n            <li class="nav-item active">\n              <a class="nav-link" href="#">Dashboard</a>\n            </li>\n            <li class="nav-item dropdown">\n              <a class="nav-link" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                Purchases\n              </a>\n              <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">\n                <a class="dropdown-item" href="/purchases/transactions">View Transactions</a>\n                <a class="dropdown-item" href="/purchases/create">Post Transaction</a>\n                <a class="dropdown-item" href="#">Reports</a>\n              </div>\n            </li>\n            <li class="nav-item dropdown">\n              <a class="nav-link" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                Sales\n              </a>\n              <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">\n                <a class="dropdown-item" href="#">View Transactions</a>\n                <a class="dropdown-item" href="#">Post Transaction</a>\n                <a class="dropdown-item" href="#">Reports</a>\n              </div>\n            </li>\n            <li class="nav-item dropdown">\n              <a class="nav-link" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                Nominal\n              </a>\n              <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">\n                <a class="dropdown-item" href="/nominals/transactions">View Transactions</a>\n                <a class="dropdown-item" href="/nominals/create">Post Transaction</a>\n                <a class="dropdown-item" href="#">Reports</a>\n              </div>\n            </li>\n            <li class="nav-item dropdown">\n              <a class="nav-link" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                Cash Book\n              </a>\n              <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">\n                <a class="dropdown-item" href="/purchases/transactions">View Transactions</a>\n                <a class="dropdown-item" href="/purchases/create">Post Transaction</a>\n                <a class="dropdown-item" href="#">Reports</a>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </nav>\n    </header>\n\n    \n    <div class="cont">\n        <div>\n            <div class="d-flex justify-content-center">\n                <div>\n                    <div class="border data-grid p-4 position-relative">\n                        <div class="invisible">\n                            \n\n\n<div class="mb-3 d-flex justify-content-center">\n    <div>\n        <div class="errors p-2 border border-danger rounded d-flex small">\n            <div>\n                <svg class="bi bi-exclamation-triangle-fill" width="2em" height="2em" viewBox="0 0 16 16" fill="red" xmlns="http://www.w3.org/2000/svg">\n                    <path fill-rule="evenodd" d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 5zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>\n                </svg>\n            </div>\n            <div class="ml-3">\n                <ul class="p-0 m-0 list-unstyled">\n                    <li>Please correct the following errors -\n                        <ul class="p-0 py-1 m-0 ml-3 small">\n                            \n                            \n                                <li class="py-1">Debits and credits must total zero.  Total debits entered i.e. positives values entered is 120, and total credits entered i.e. negative values entered, is -60.  This gives a non-zero total of 60</li>\n                            \n                            \n                                \n                            \n                                \n                            \n                            \n                             \n                        </ul>\n                    </li>\n                </ul>\n                <p class="mt-2">\n                    <span class="font-weight-bold">NOTE:  </span>\n                    Errors relating to a specific field show by a red triangle in the bottom left.  Hover over\n                    the field to see the error at the bottom of the screen.\n                </p>\n            </div>\n        </div>\n    </div>\n</div>\n\n                            \n<div>\n    <h2 class="h6 font-weight-bold">Enter</h2>\n</div>\n\n                            <div>\n                                \n                                <form class="formset" method="POST">\n                                    <input type="hidden" name="csrfmiddlewaretoken" value="aFqjwIBm11qxvhOeAQsnEqbBESYQJ1sJcfj8Z2lDrAwtZjgBoa3Q0p1AOPGrbQqX">\n                                \n                                    \n                                    \n    \n\n    \n    \n    <div  \n     >\n        <div  \n    class="form-group mr-2" >\n        \n<select name="header-type" class="transaction-type-select" required id="id_header-type">\n  <option value="">---------</option>\n\n  <option value="nj" selected>Journal</option>\n\n</select>\n</div><div  \n    class="mb-4 d-flex justify-content-between" >\n        <div  \n    class="d-flex justify-content-between" >\n        <div  \n    class="form-group mr-2" >\n        \n<label  for="id_header-ref">Ref</label>\n\n<input type="text" name="header-ref" value="test journal" maxlength="20" class="w-100 input textinput textInput" required id="id_header-ref">\n\n\n</div><div  \n    class="form-group mr-2 position-relative" >\n        \n<label  for="id_header-period">Period</label>\n\n<input type="text" name="header-period" value="202007" maxlength="6" class="w-100 input textinput textInput" required id="id_header-period">\n\n\n</div><div  \n    class="form-group mr-2 position-relative" >\n        \n<label  for="id_header-date">Date</label>\n\n\n\n<input type="text" name="header-date" class="form-control w-100 input datepicker datetimepicker-input" required="True" id="id_header_date" data-toggle="datetimepicker" data-target="#id_header_date">\n\n\n<script type="text/javascript">\n    function deferDateTimePicker_id_header_date() {\n        if (window.jQuery && $.fn.datetimepicker) {\n            $(\'#id_header_date\').datetimepicker({"format": "YYYY-MM-DD", "icons": {"time": "fa fa-clock-o"}, "useCurrent": true, "collapse": true, "date": "2020-07-25T00:00:00"});\n        } else {\n            setTimeout(function() { deferDateTimePicker_id_header_date() }, 50);\n        }\n    }\n\n    deferDateTimePicker_id_header_date();\n</script>\n\n\n\n</div>\n</div><div  \n    class="form-group" >\n        \n<label  for="id_header-total">Total</label>\n\n<input type="number" name="header-total" value="120" step="0.01" class="w-100 input numberinput" id="id_header-total">\n\n    <small id="hint_id_header-total" class="form-text text-muted small"><span class=\'d-block\'>The total value of the debit side of the journal<span class=\'d-block\'>i.e. the total of the positive values</span></span></small>\n\n\n</div>\n</div>\n</div>\n\n\n\n                                    \n                                    <div>\n                                        \n\n<input type="hidden" name="line-TOTAL_FORMS" value="2" id="id_line-TOTAL_FORMS"> <input type="hidden" name="line-INITIAL_FORMS" value="0" id="id_line-INITIAL_FORMS"> <input type="hidden" name="line-MIN_NUM_FORMS" value="0" id="id_line-MIN_NUM_FORMS"> <input type="hidden" name="line-MAX_NUM_FORMS" value="1000" id="id_line-MAX_NUM_FORMS">\n                                    </div>\n                                    <div  class="lines" >\n                                        <table class="line">\n                                                \n\n\n\n<thead class="text-muted"> <tr class=""> <th class="col-id d-none"> <label for="id_line-__prefix__-id">Id</label>\n</th><th class="col-description"> <label for="id_line-__prefix__-description">Description</label>\n</th><th class="col-goods"> <label for="id_line-__prefix__-goods">Goods</label>\n</th><th class="col-nominal"> <label for="id_line-__prefix__-nominal">Nominal</label>\n</th><th class="col-vat_code"> <label for="id_line-__prefix__-vat_code">Vat code</label>\n</th><th class="col-vat"> <label for="id_line-__prefix__-vat">Vat</label>\n</th><th class="pointer col-close-icon"> </th>\n\n</tr> </thead> <tbody class="table-bordered"> <tr class=""> <td class="col-id d-none"> <input type="hidden" name="line-0-id" class="hiddeninput" id="id_line-0-id"> </td><td class="col-description"> <div class="h-100 "> <input type="text" name="line-0-description" value="a line description" maxlength="100" class="can_highlight h-100 w-100 border-0 textinput textInput" id="id_line-0-description"> </div> </td><td class="col-goods"> <input type="number" name="line-0-goods" value="100" step="0.01" class="can_highlight h-100 w-100 border-0 numberinput" id="id_line-0-goods"> </td><td class="col-nominal"> <div class="h-100 "> <div class="input-dropdown-widget-wrapper position-relative"> <div class="label p-1">Bank Account</div> <div class="input-wrapper"> <div class="input-dropdown-widget d-flex"> <input name="line-0-nominal" data-new="#new-nominal" data-load-url="/nominals/load_options?field=nominal" data-validation-url="/nominals/validate_choice?field=nominal" data-widget="input-dropdown-widget" type="text" class="h-100 w-100 border-0 inputdropdown" id="id_line-0-nominal" data-choice-value="3" data-last-validated-label="Bank Account" data-last-validated-value="3" data-default-label="Bank Account" data-default-value="3" value="3"> <div class="dropdown-btn d-flex align-items-center pointer py-1 px-2 border-left"> <img src="/static/images/arrow-down.png"> </div> </div> <ul class="input-dropdown-widget-dropdown position-absolute"> <li class="new-btn font-weight-bold color-b-1">+ New Item</li> <li data-value="3" data-selected>Bank Account</li> </ul> </div>\n</div> </div> </td><td class="col-vat_code"> <div class="input-dropdown-widget-wrapper position-relative"> <div class="label p-1">1 - standard rate - 20.00%</div> <div class="input-wrapper"> <div class="input-dropdown-widget d-flex"> <input name="line-0-vat_code" data-new="#new-vat-code" data-load-url="/nominals/load_options?field=vat_code" data-validation-url="/nominals/validate_choice?field=vat_code" data-widget="input-dropdown-widget" type="text" class="h-100 w-100 border-0 inputdropdown" id="id_line-0-vat_code" data-choice-value="1" data-last-validated-label="1 - standard rate - 20.00%" data-last-validated-value="1" data-default-label="1 - standard rate - 20.00%" data-default-value="1" data-model-attr-rate="20.00" value="1"> <div class="dropdown-btn d-flex align-items-center pointer py-1 px-2 border-left"> <img src="/static/images/arrow-down.png"> </div> </div> <ul class="input-dropdown-widget-dropdown position-absolute"> <li class="new-btn font-weight-bold color-b-1">+ New Item</li> <li data-value="1" data-model-attr-rate="20.00" data-selected>1 - standard rate - 20.00%</li> </ul> </div>\n</div> </td><td class="col-vat"> <input type="number" name="line-0-vat" value="20" step="0.01" class="can_highlight w-100 h-100 border-0 numberinput" id="id_line-0-vat"> </td><td class="pointer col-close-icon"> <div class="d-flex justify-content-center"> <img src="/static/images/close-icon.png">\n</div>\n<input type="hidden" name="line-0-DELETE" class="delete-line hiddeninput" id="id_line-0-DELETE"> </td>\n\n</tr> <tr class=""> <td class="col-id d-none"> <input type="hidden" name="line-1-id" class="hiddeninput" id="id_line-1-id"> </td><td class="col-description"> <div class="h-100 "> <input type="text" name="line-1-description" value="a line description" maxlength="100" class="can_highlight h-100 w-100 border-0 textinput textInput" id="id_line-1-description"> </div> </td><td class="col-goods"> <input type="number" name="line-1-goods" value="-50" step="0.01" class="can_highlight h-100 w-100 border-0 numberinput" id="id_line-1-goods"> </td><td class="col-nominal"> <div class="h-100 "> <div class="input-dropdown-widget-wrapper position-relative"> <div class="label p-1">Trade Debtors</div> <div class="input-wrapper"> <div class="input-dropdown-widget d-flex"> <input name="line-1-nominal" data-new="#new-nominal" data-load-url="/nominals/load_options?field=nominal" data-validation-url="/nominals/validate_choice?field=nominal" data-widget="input-dropdown-widget" type="text" class="h-100 w-100 border-0 inputdropdown" id="id_line-1-nominal" data-choice-value="4" data-last-validated-label="Trade Debtors" data-last-validated-value="4" data-default-label="Trade Debtors" data-default-value="4" value="4"> <div class="dropdown-btn d-flex align-items-center pointer py-1 px-2 border-left"> <img src="/static/images/arrow-down.png"> </div> </div> <ul class="input-dropdown-widget-dropdown position-absolute"> <li class="new-btn font-weight-bold color-b-1">+ New Item</li> <li data-value="4" data-selected>Trade Debtors</li> </ul> </div>\n</div> </div> </td><td class="col-vat_code"> <div class="input-dropdown-widget-wrapper position-relative"> <div class="label p-1">1 - standard rate - 20.00%</div> <div class="input-wrapper"> <div class="input-dropdown-widget d-flex"> <input name="line-1-vat_code" data-new="#new-vat-code" data-load-url="/nominals/load_options?field=vat_code" data-validation-url="/nominals/validate_choice?field=vat_code" data-widget="input-dropdown-widget" type="text" class="h-100 w-100 border-0 inputdropdown" id="id_line-1-vat_code" data-choice-value="1" data-last-validated-label="1 - standard rate - 20.00%" data-last-validated-value="1" data-default-label="1 - standard rate - 20.00%" data-default-value="1" data-model-attr-rate="20.00" value="1"> <div class="dropdown-btn d-flex align-items-center pointer py-1 px-2 border-left"> <img src="/static/images/arrow-down.png"> </div> </div> <ul class="input-dropdown-widget-dropdown position-absolute"> <li class="new-btn font-weight-bold color-b-1">+ New Item</li> <li data-value="1" data-model-attr-rate="20.00" data-selected>1 - standard rate - 20.00%</li> </ul> </div>\n</div> </td><td class="col-vat"> <input type="number" name="line-1-vat" value="-10" step="0.01" class="can_highlight w-100 h-100 border-0 numberinput" id="id_line-1-vat"> </td><td class="pointer col-close-icon"> <div class="d-flex justify-content-center"> <img src="/static/images/close-icon.png">\n</div>\n<input type="hidden" name="line-1-DELETE" class="delete-line hiddeninput" id="id_line-1-DELETE"> </td>\n\n</tr> <tr class="d-none empty-form"> <td class="col-id d-none"> <input type="hidden" name="line-__prefix__-id" class="hiddeninput" id="id_line-__prefix__-id"> </td><td class="col-description"> <div class="h-100 "> <input type="text" name="line-__prefix__-description" maxlength="100" class="can_highlight h-100 w-100 border-0 textinput textInput" id="id_line-__prefix__-description"> </div> </td><td class="col-goods"> <input type="number" name="line-__prefix__-goods" step="0.01" class="can_highlight h-100 w-100 border-0 numberinput" id="id_line-__prefix__-goods"> </td><td class="col-nominal"> <div class="h-100 "> <div class="input-dropdown-widget-wrapper position-relative"> <div class="label p-1"></div> <div class="input-wrapper"> <div class="input-dropdown-widget d-flex"> <input name="line-__prefix__-nominal" data-new="#new-nominal" data-load-url="/nominals/load_options?field=nominal" data-validation-url="/nominals/validate_choice?field=nominal" data-widget="input-dropdown-widget" type="text" class="h-100 w-100 border-0 inputdropdown" id="id_line-__prefix__-nominal" data-choice-value="" data-last-validated-label="" data-last-validated-value="" data-default-label="" data-default-value="" value=""> <div class="dropdown-btn d-flex align-items-center pointer py-1 px-2 border-left"> <img src="/static/images/arrow-down.png"> </div> </div> <ul class="input-dropdown-widget-dropdown position-absolute"> <li class="new-btn font-weight-bold color-b-1">+ New Item</li> </ul> </div>\n</div> </div> </td><td class="col-vat_code"> <div class="input-dropdown-widget-wrapper position-relative"> <div class="label p-1"></div> <div class="input-wrapper"> <div class="input-dropdown-widget d-flex"> <input name="line-__prefix__-vat_code" data-new="#new-vat-code" data-load-url="/nominals/load_options?field=vat_code" data-validation-url="/nominals/validate_choice?field=vat_code" data-widget="input-dropdown-widget" type="text" class="h-100 w-100 border-0 inputdropdown" id="id_line-__prefix__-vat_code" data-choice-value="" data-last-validated-label="" data-last-validated-value="" data-default-label="" data-default-value="" value=""> <div class="dropdown-btn d-flex align-items-center pointer py-1 px-2 border-left"> <img src="/static/images/arrow-down.png"> </div> </div> <ul class="input-dropdown-widget-dropdown position-absolute"> <li class="new-btn font-weight-bold color-b-1">+ New Item</li> </ul> </div>\n</div> </td><td class="col-vat"> <input type="number" name="line-__prefix__-vat" step="0.01" class="can_highlight w-100 h-100 border-0 numberinput" id="id_line-__prefix__-vat"> </td><td class="pointer col-close-icon"> <div class="d-flex justify-content-center"> <img src="/static/images/close-icon.png">\n</div>\n<input type="hidden" name="line-__prefix__-DELETE" class="delete-line hiddeninput" id="id_line-__prefix__-DELETE"> </td>\n\n</tr> </tbody>\n                                        </table>\n                                        <div class="mt-3 mb-5">\n                                            \n                                            <div>\n                                                <div class="dropdown-split-button">\n                                                    <div class="btn-group" role="group" aria-label="Button group with nested dropdown">\n                                                        <button type="button" class="btn button add-lines">Add New Line</button>\n                                                        <button id="btnGroupDrop1" type="button" class="btn button dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>\n                                                        <div class="dropdown-menu add-multiple-lines" aria-labelledby="btnGroupDrop1">\n                                                            <a class="dropdown-item pointer" data-lines="5">Add 5 lines</a>\n                                                            <a class="dropdown-item pointer" data-lines="10">Add 10 lines</a>\n                                                            <a class="dropdown-item pointer" data-lines="20">Add 20 lines</a>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            \n                                            <div class="d-flex justify-content-end totals pr-3">\n                                                <div>\n                                                    <div class="row small black-single-border-bottom text-right">\n                                                        <div class="col">\n                                                            Subtotal\n                                                        </div>\n                                                        <div class="col sub-total-lines">\n                                                            0.00\n                                                        </div>\n                                                        <div class="mt-2 w-100"></div>\n                                                        <div class="my-2 col">\n                                                            Vat\n                                                        </div>\n                                                        <div class="my-2 col vat-total-lines">\n                                                            0.00\n                                                        </div>\n                                                    </div>\n                                                    <div class="py-2 row font-weight-bold h4 black-double-border-bottom text-right">\n                                                        <div class="col text-uppercase">\n                                                            total\n                                                        </div>\n                                                        <div class="col total-lines">\n                                                            0.00\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                \n                                                \n                                            </div>\n                                        </div>\n                                    </div>\n                                    \n                                    \n<div class="d-flex justify-content-end align-items-center p-2 border bg-white">\n    <div>\n        <button type="submit" class="btn btn-success xero-btn approve" name="approve" value="add_another">Approve and add another</button>\n        <button type="submit" class="btn btn-success xero-btn approve" name="approve" value="do_not_add_another">Approve</button>\n    </div>\n</div>\n\n                                    \n                                    \n                                \n                                    </form>\n                                \n                            </div>\n                            \n                            \n                        </div>\n                        <div class="spinner-border color-b-1 loading-icon" role="status">\n                            <span class="sr-only">Loading...</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n    </div>\n\n    <div class="mt-4 errors field_errors_wrapper p-2 border border-danger rounded small">\n        <div class="d-flex">\n            <div>\n                <svg class="bi bi-exclamation-triangle-fill" width="2em" height="2em" viewBox="0 0 16 16" fill="red" xmlns="http://www.w3.org/2000/svg">\n                    <path fill-rule="evenodd" d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 5zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>\n                </svg>\n            </div>\n            <div class="field_error">\n                \n            </div>\n        </div>\n    </div>\n\n\n\n    \n    \n\n<div class="modal-on-the-fly-forms">\n    <div class="modal fade" id="new-vat-code" tabindex="-1" role="dialog"  aria-hidden="true">\n        <div class="modal-dialog modal-dialog-centered">\n            <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title font-weight-bold" id="exampleModalLabel">New Vat Code</h5>\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <form  action="/nominals/create_on_the_fly" data-form="vat" method="post" >\n    \n        <input type="hidden" name="csrfmiddlewaretoken" value="aFqjwIBm11qxvhOeAQsnEqbBESYQJ1sJcfj8Z2lDrAwtZjgBoa3Q0p1AOPGrbQqX">\n    \n\n    \n    \n    <div  \n    class="modal-body" >\n        <div  \n    class="mt-2" >\n        \n<label  for="id_vat-code">Code</label>\n\n<input type="text" name="vat-code" maxlength="10" class="w-100 input textinput textInput" required id="id_vat-code">\n\n\n</div><div  \n    class="mt-2" >\n        \n<label  for="id_vat-name">Name</label>\n\n<input type="text" name="vat-name" maxlength="30" class="w-100 input textinput textInput" required id="id_vat-name">\n\n\n</div><div  \n    class="mt-2" >\n        \n<label  for="id_vat-rate">Rate</label>\n\n<input type="number" name="vat-rate" value="0" step="0.01" class="w-100 input numberinput" required id="id_vat-rate">\n\n\n</div><div  \n    class="mt-3" >\n        \n<label  class="d-block"  for="id_vat-registered">Registered</label>\n\n<input type="checkbox" name="vat-registered" class="checkboxinput" id="id_vat-registered" checked>\n\n\n</div>\n</div><div  \n    class="modal-footer" >\n        <button type="button" class="btn btn-sm btn-secondary cancel" data-dismiss="modal">Cancel</button><button type="submit" class="btn btn-sm btn-success">Save</button>\n</div>\n\n\n</form>\n            </div>\n        </div>\n    </div>\n\n    <div class="modal fade" id="new-nominal" tabindex="-1" role="dialog" aria-hidden="true">\n        <div class="modal-dialog modal-dialog-centered">\n            <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title font-weight-bold" id="exampleModalLabel">New Nominal</h5>\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <form  action="/nominals/create_on_the_fly" data-form="nominal" method="post" >\n    \n        <input type="hidden" name="csrfmiddlewaretoken" value="aFqjwIBm11qxvhOeAQsnEqbBESYQJ1sJcfj8Z2lDrAwtZjgBoa3Q0p1AOPGrbQqX">\n    \n\n    \n    \n    <div  \n    class="modal-body" >\n        <div  \n    class="mt-2" >\n        \n<label  for="id_nominal-parent">Account Type</label>\n\n<select name="nominal-parent" class="w-100 select" required id="id_nominal-parent">\n  <option value="" selected>---------</option>\n\n  <optgroup label="Assets">\n  <option value="2">Current Assets</option>\n\n  </optgroup>\n</select>\n\n\n</div><div  \n    class="mt-2" >\n        \n<label  for="id_nominal-name">Name</label>\n\n<input type="text" name="nominal-name" maxlength="50" class="w-100 input can-highlight textinput textInput" required id="id_nominal-name">\n\n\n</div>\n</div><div  \n    class="modal-footer" >\n        <button type="button" class="btn btn-sm btn-secondary cancel" data-dismiss="modal">Cancel</button><button type="submit" class="btn btn-sm btn-success">Save</button>\n</div>\n\n\n</form>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n    <script src="https://code.jquery.com/jquery-3.5.0.min.js"></script>\n    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>\n    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>\n    \n    \n    \n<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>\n<script src="/static/js/infinite_scroll.js"></script>\n<script src="/static/js/input_dropdown_widget.js"></script>\n<script src="/static/js/grid.js"></script>\n<script src="/static/js/error_tooltip.js"></script>\n<script>\n    $(document).ready(function () {\n\n    // THIS SCRIPT ASSUMES THE INPUT_DROPDOWN WIDGET IS ASSUMED\n    // MAY WANT TO MAKE THIS CONFIGURABLE LATER ON\n    // LIKEWISE THE SUBMIT CALLBACK IS FOR A FORM ELEMENT\n    // WITH A FORMSET CLASS\n    // MIGHT WANT TO MAKE THIS CONFIGURABLE ALSO\n\n    var line_form_prefix = "line" || "form";\n\n    // for entering transaction lines only\n    var main_grid = new Grid({\n        prefix: line_form_prefix,\n        form_identifier: ".formset", // pluralise\n        order_lines: true,\n        order_identifier: ".ordering",\n        empty_form_identifier: ".empty-form",\n    });\n\n    function two_decimal_places(n_str) {\n        if(n_str){\n            return parseFloat(n_str).toFixed(2);\n        }\n    }\n\n    main_grid.add_callback = function (new_line) {\n        input_dropdown_widget.add(new_line);\n        new_line.find("td.col-close-icon").on("click", function () {\n            main_grid.delete_line($(this));\n        });\n        new_line.on("change", "input[type=number]", function(){\n            var n = two_decimal_places($(this).val());\n            $(this).val(n);\n        });\n    };\n\n    $(".add-lines").on("click", function (event) {\n        main_grid.add_line();\n        event.stopPropagation();\n    });\n\n    $(".add-multiple-lines").on("click", function (event) {\n        var $target = $(event.target);\n        var lines = $target.attr("data-lines");\n        if (lines) {\n            lines = +lines;\n            main_grid.add_many_lines(lines);\n        }\n        event.stopPropagation();\n    });\n\n    \n\n    $("td.col-close-icon").on("click", function (event) {\n        main_grid.delete_line($(this));\n        event.stopPropagation();\n    });\n\n    \n\n    $("html").on("click focusin", function () {\n        $("td input.can_highlight").removeClass("data-input-focus-border");\n        input_dropdown_widget.close_input_dropdowns();\n    });\n\n    $("td").on("click focusin", function (event) {\n        $("td input.can_highlight").not($(this)).removeClass("data-input-focus-border");\n        if ($(this).find("input").hasClass("can_highlight")) {\n            $(this).find("input").addClass("data-input-focus-border");\n            input_dropdown_widget.close_input_dropdowns();\n        }\n        event.stopPropagation();\n    });\n\n    input_dropdown_widget.init();\n\n    $("input[type=number]").each(function () {\n        var n = two_decimal_places($(this).val());\n        $(this).val(n);\n    });\n\n    $("input[type=number]").on("change", function () {\n        var n = two_decimal_places($(this).val());\n        $(this).val(n);\n    });\n\n});\n    \n</script>\n<script src="/static/accountancy/js/calculator.js"></script>\n<script src="/static/js/selectize.min.js"></script>\n<script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>\n<script src="/static/js/modal_form.js"></script>\n<link href="//cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.1.2/css/tempusdominus-bootstrap-4.min.css" type="text/css" media="all" rel="stylesheet">\n<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>\n<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.1.2/js/tempusdominus-bootstrap-4.min.js"></script>\n<script>\n\n    $(document).ready(function(){\n        $(".datepicker").removeClass("form-control");\n    });\n\n    \n\n    $(".transaction-type-select").selectize();\n\n    \n\n    \n\n        $("select.transaction-type-select").on("change", function() {\n            var transaction_type = $(this).val();\n            var url = window.location.href.split(\'?\')[0];\n            window.location.href = url + "?t=" + transaction_type;\n        });\n\n    \n\n    \n\n    \n        $(".supplier-select").selectize({\n            valueField: \'id\',\n            labelField: \'code\',\n            searchField: \'code\',\n            insert: true,\n            create: function(input, callback) {\n                $.ajax({\n                    url: "/purchases/create_on_the_fly",\n                    method: "POST",\n                    // here we hard code the form prefix \'supplier\'\n                    data: "form=supplier&supplier-code=" + input + "&csrfmiddlewaretoken=" + Cookies.get(\'csrftoken\'),\n                    success: function (data) {\n                        if(data.success) {\n                            callback({\n                                id: data.result.id,\n                                code: data.result.text\n                            });\n                            // spent ages on this\n                            // selectize.js says the keys should be value and text but according to below this is wrong\n                            // https://github.com/selectize/selectize.js/issues/1329#issuecomment-358857146\n                            // https://stackoverflow.com/questions/24366365/creating-an-item-if-not-already-exists-in-selectize-js-select-box-and-ajax-updat\n                        }\n                    },\n                    error: function (jqXHR, textStatus, errorThrown) {\n                        console.log("There was an error creating the new item", jqXHR, textStatus, errorThrown);\n                        callback({\n                            id: \'\',\n                            code: \'\'\n                        });\n                    }\n                });\n            },\n            load: function(query, callback) {\n                $.ajax({\n                    url: \'/purchases/load_suppliers\',\n                    type: \'GET\',\n                    dataType: \'json\',\n                    data: {\n                        q: query,\n                        page_limit: 10,\n                    },\n                    error: function() {\n                        console.log("error loading suppliers...");\n                    },\n                    success: function(res) {\n                        callback(res.data);\n                    }\n                });\n            }\n        });\n    \n\n</script>\n    <script src="/static/purchases/js/on_the_fly.js"></script>\n\n    \n    \n\n    <script src="/static/accountancy/js/content_loaded.js"></script>\n  </body>\n</html>